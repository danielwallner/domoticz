'''Note''': This document is maintained on [https://github.com/domoticz/wiki/Netatmo.wiki github], and the wiki version is automatically generated. Edits should be performed on github, or they may be suggested on the wiki articleâ€™s [https://wiki.domoticz.com/Netatmo Wiki Domoticz Netatmo]. Editing can be done by any editor but if you are looking for a specialized markDown editor; [https://stackedit.io/app# stackedit.io] would be a good choice.

<span id="Netatmo"></span>
= About Netatmo Hardware =

Features supported:
* Temperature sensor,
* Set point switch,
* "away" mode switch,
* Heating Status Switch,
* Temperature & Humidity Sensor,
* Barometer Sensor,
* Rain Sensor,
* Air QUality Sensor,
* Sound Sensor,
* Wind Sensor,
* Alert Sensor for Security Events,


<span id="Install :"></span>
= Install =

Enable "Accept new Hardware Devices" in Setup/Setting
Add a "Netatmo" Hardware in Setup/Hardware. Input your Netatmo login and password. 5 minutes Data Timeout(not sure about that).
Turned the Thermostat up and down via the iPhone app and it showed up in Domoticz!
In Setup/Devices, display the "not used" and "add" the new devices.
[https://forum.domoticz.com Forum Domoticz].

<span id="Authentication"></span>
= Authentication =
New Netatmo Authentication method implemented from 2024.1

step 1:

Setup an App under MyApps in the Netatmo developers portal (https://dev.netatmo.com/)

The Redirect_URI has to contain;
""

Once configured correctly, the Client_ID and Client_Secret will be generated and shown.

step 2:

In the domoticz hardware setup:

Create/modify the Netatmo hardware
the Client ID should contain <client_id>
the Client Secret should contain <client_secret>
Then Select the Desired Scope compatible with your Devices.

Then Click on the Login Button.

This brings you to the My Netatmo page where you have to identify yourself and are asked for permission to grant access to certain devices and types (based on the scope provided).

Confirm the access to the Devices.
After confirmation, your browser will try to redirect you.

Then your Hardware is added or you can press 'ADD'.

if you take too long and Domoticz says it cannot login, error: No access granted, check credentials...

Please try again....


<span id="supported Devices"></span>
= supported Devices =
At the moment, the supported Devices are;

* Weather station,
* Netatmo thermostat,
* Netatmo Valves,
* Homecoach,
* CO2detector,
* Smokedetector,
* Presence camera (Only Events),
* Welkom camera   (Only Events),
* Door Tag,

<span id="settings"></span>
= Settings =

Settings for Netatmo are found in the Domoticz GUI: '''Name: &gt; Client ID: &gt; Client Secret: &gt; Scope:''':

*  '''Name''': This is the name you wan't for your Hardware module.
*  '''Log level''',
*  '''Data Timeout''',
** '''Client ID''': Client ID obtained from Netatmo Development Site
** '''Client Secret''': Client Secret obtained from Netatmo Development Site.
** '''Scope''': Select here the Scope for your Netatmo Devices, make sure you only select scopes compatible with your devices!

<span id="troubleshooting"></span>
= Troubleshooting =

So, you think if you have done everything correctly but things do not work (in some way) as you expected. Here are a couple steps you can do to find the cause.

<span id="turn-on-debug-logging"></span>
=== Turn on debug logging ===
Edit your /etc/systemd/system/domoticz.service file to;

ExecStart=/home/domoticz/domoticz -www 8484 -sslwww 8443 -log "/var/log/domoticz.log" -loglevel all -debuglevel normal,hardware,received,eventsystem
WorkingDirectory=/home/domoticz


=== Get help ===

The Domoticz forum is a great resource for help and solutions. Check the [https://forum.domoticz.com Forum].

<span id="wiki Netamo Domoticz."></span>
= History [https://wiki.domoticz.com/Netatmo link to wiki] =

